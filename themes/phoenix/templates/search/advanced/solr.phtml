<? $single_quote = "'"; //needed for our option values with 's in the name?>

<?
/*
 * Prepare filter strings for comparison.
 */

function prep_string($s) {
    return strtolower(html_entity_decode($s, ENT_QUOTES));
}

$searchFilters = ($this->saved) ?  $this->saved->getParams()->getFilterList() : [];

$languages = [
	['class' => 'all_languages', 'value' => '', 'text' => 'All Languages'],
	['value' => 'language:"English"', 'text' => 'English'],
	['value' => 'language:"German"', 'text' => 'German'],
	['value' => 'language:"French"', 'text' => 'French'],
	['value' => 'language:"Spanish"', 'text' => 'Spanish'],
	['value' => 'language:"Chinese"', 'text' => 'Chinese'],
	['value' => 'language:"Russian"', 'text' => 'Russian'],
	['value' => 'language:"Italian"', 'text' => 'Italian'],
	['value' => 'language:"Japanese"', 'text' => 'Japanese'],
	['value' => 'language:"Abkhazian"', 'text' => 'Abkhazian'],
	['value' => 'language:"Achinese"', 'text' => 'Achinese'],
	['value' => 'language:"Acoli"', 'text' => 'Acoli'],
	['value' => 'language:"Adyghe"', 'text' => 'Adyghe'],
	['value' => 'language:"Afrikaans"', 'text' => 'Afrikaans'],
	['value' => 'language:"Afro-Asiatic"', 'text' => 'Afro-Asiatic'],
	['value' => 'language:"Ainu"', 'text' => 'Ainu'],
	['value' => 'language:"Akan"', 'text' => 'Akan'],
	['value' => 'language:"Akkadian"', 'text' => 'Akkadian'],
	['value' => 'language:"Albanian"', 'text' => 'Albanian'],
	['value' => 'language:"Aleut"', 'text' => 'Aleut'],
	['value' => 'language:"Algonquian"', 'text' => 'Algonquian'],
	['value' => 'language:"Altaic"', 'text' => 'Altaic'],
	['value' => 'language:"Amharic"', 'text' => 'Amharic'],
	['value' => 'language:"Ancient Egyptian"', 'text' => 'Ancient Egyptian'],
	['value' => 'language:"Ancient Greek"', 'text' => 'Ancient Greek'],
	['value' => 'language:"Angika"', 'text' => 'Angika'],
	['value' => 'language:"Apache"', 'text' => 'Apache'],
	['value' => 'language:"Arabic"', 'text' => 'Arabic'],
	['value' => 'language:"Aragonese"', 'text' => 'Aragonese'],
	['value' => 'language:"Aramaic"', 'text' => 'Aramaic'],
	['value' => 'language:"Arapaho"', 'text' => 'Arapaho'],
	['value' => 'language:"Arawak"', 'text' => 'Arawak'],
	['value' => 'language:"Armenian"', 'text' => 'Armenian'],
	['value' => 'language:"Aromanian"', 'text' => 'Aromanian'],
	['value' => 'language:"Artificial"', 'text' => 'Artificial'],
	['value' => 'language:"Assamese"', 'text' => 'Assamese'],
	['value' => 'language:"Asturian"', 'text' => 'Asturian'],
	['value' => 'language:"Athapascan"', 'text' => 'Athapascan'],
	['value' => 'language:"Australian"', 'text' => 'Australian'],
	['value' => 'language:"Austronesian"', 'text' => 'Austronesian'],
	['value' => 'language:"Avaric"', 'text' => 'Avaric'],
	['value' => 'language:"Avestan"', 'text' => 'Avestan'],
	['value' => 'language:"Awadhi"', 'text' => 'Awadhi'],
	['value' => 'language:"Aymara"', 'text' => 'Aymara'],
	['value' => 'language:"Azerbaijani"', 'text' => 'Azerbaijani'],
	['value' => 'language:"Balinese"', 'text' => 'Balinese'],
	['value' => 'language:"Baltic"', 'text' => 'Baltic'],
	['value' => 'language:"Baluchi"', 'text' => 'Baluchi'],
	['value' => 'language:"Bambara"', 'text' => 'Bambara'],
	['value' => 'language:"Bamileke"', 'text' => 'Bamileke'],
	['value' => 'language:"Banda"', 'text' => 'Banda'],
	['value' => 'language:"Bantu"', 'text' => 'Bantu'],
	['value' => 'language:"Basa"', 'text' => 'Basa'],
	['value' => 'language:"Bashkir"', 'text' => 'Bashkir'],
	['value' => 'language:"Basque"', 'text' => 'Basque'],
	['value' => 'language:"Batak"', 'text' => 'Batak'],
	['value' => 'language:"Beja"', 'text' => 'Beja'],
	['value' => 'language:"Belarusian"', 'text' => 'Belarusian'],
	['value' => 'language:"Bemba"', 'text' => 'Bemba'],
	['value' => 'language:"Bengali"', 'text' => 'Bengali'],
	['value' => 'language:"Berber"', 'text' => 'Berber'],
	['value' => 'language:"Bhojpuri"', 'text' => 'Bhojpuri'],
	['value' => 'language:"Bihari"', 'text' => 'Bihari'],
	['value' => 'language:"Bikol"', 'text' => 'Bikol'],
	['value' => 'language:"Bini"', 'text' => 'Bini'],
	['value' => 'language:"Bislama"', 'text' => 'Bislama'],
	['value' => 'language:"Blin"', 'text' => 'Blin'],
	['value' => 'language:"Bosnian"', 'text' => 'Bosnian'],
	['value' => 'language:"Braj"', 'text' => 'Braj'],
	['value' => 'language:"Breton"', 'text' => 'Breton'],
	['value' => 'language:"Buginese"', 'text' => 'Buginese'],
	['value' => 'language:"Bulgarian"', 'text' => 'Bulgarian'],
	['value' => 'language:"Buriat"', 'text' => 'Buriat'],
	['value' => 'language:"Burmese"', 'text' => 'Burmese'],
	['value' => 'language:"Caddo"', 'text' => 'Caddo'],
	['value' => 'language:"Catalan"', 'text' => 'Catalan'],
	['value' => 'language:"Caucasian"', 'text' => 'Caucasian'],
	['value' => 'language:"Cebuano"', 'text' => 'Cebuano'],
	['value' => 'language:"Celtic"', 'text' => 'Celtic'],
	['value' => 'language:"Central American Indian"', 'text' => 'Central American Indian'],
	['value' => 'language:"Central Khmer"', 'text' => 'Central Khmer'],
	['value' => 'language:"Chagatai"', 'text' => 'Chagatai'],
	['value' => 'language:"Chamic"', 'text' => 'Chamic'],
	['value' => 'language:"Chamorro"', 'text' => 'Chamorro'],
	['value' => 'language:"Chechen"', 'text' => 'Chechen'],
	['value' => 'language:"Cherokee"', 'text' => 'Cherokee'],
	['value' => 'language:"Cheyenne"', 'text' => 'Cheyenne'],
	['value' => 'language:"Chibcha"', 'text' => 'Chibcha'],
	['value' => 'language:"Chichewa"', 'text' => 'Chichewa'],
	['value' => 'language:"Chinese"', 'text' => 'Chinese'],
	['value' => 'language:"Chinook"', 'text' => 'Chinook'],
	['value' => 'language:"Chipewyan"', 'text' => 'Chipewyan'],
	['value' => 'language:"Choctaw"', 'text' => 'Choctaw'],
	['value' => 'language:"Church Slavic"', 'text' => 'Church Slavic'],
	['value' => 'language:"Chuukese"', 'text' => 'Chuukese'],
	['value' => 'language:"Chuvash"', 'text' => 'Chuvash'],
	['value' => 'language:"Classical Syriac"', 'text' => 'Classical Syriac'],
	['value' => 'language:"Coptic"', 'text' => 'Coptic'],
	['value' => 'language:"Cornish"', 'text' => 'Cornish'],
	['value' => 'language:"Corsican"', 'text' => 'Corsican'],
	['value' => 'language:"Cree"', 'text' => 'Cree'],
	['value' => 'language:"Creek"', 'text' => 'Creek'],
	['value' => 'language:"Creole"', 'text' => 'Creole'],
	['value' => 'language:"Creoles"', 'text' => 'Creoles'],
	['value' => 'language:"Crimean Tatar"', 'text' => 'Crimean Tatar'],
	['value' => 'language:"Croatian"', 'text' => 'Croatian'],
	['value' => 'language:"Cushitic"', 'text' => 'Cushitic'],
	['value' => 'language:"Czech"', 'text' => 'Czech'],
	['value' => 'language:"Dakota"', 'text' => 'Dakota'],
	['value' => 'language:"Danish"', 'text' => 'Danish'],
	['value' => 'language:"Dargwa"', 'text' => 'Dargwa'],
	['value' => 'language:"Delaware"', 'text' => 'Delaware'],
	['value' => 'language:"Dinka"', 'text' => 'Dinka'],
	['value' => 'language:"Divehi"', 'text' => 'Divehi'],
	['value' => 'language:"Dogri"', 'text' => 'Dogri'],
	['value' => 'language:"Dogrib"', 'text' => 'Dogrib'],
	['value' => 'language:"Dravidian"', 'text' => 'Dravidian'],
	['value' => 'language:"Duala"', 'text' => 'Duala'],
	['value' => 'language:"Dutch"', 'text' => 'Dutch'],
	['value' => 'language:"Dyula"', 'text' => 'Dyula'],
	['value' => 'language:"Dzongkha"', 'text' => 'Dzongkha'],
	['value' => 'language:"Eastern Frisian"', 'text' => 'Eastern Frisian'],
	['value' => 'language:"Efik"', 'text' => 'Efik'],
	['value' => 'language:"Elamite"', 'text' => 'Elamite'],
	['value' => 'language:"English"', 'text' => 'English'],
	['value' => 'language:"Esperanto"', 'text' => 'Esperanto'],
	['value' => 'language:"Estonian"', 'text' => 'Estonian'],
	['value' => 'language:"Ewe"', 'text' => 'Ewe'],
	['value' => 'language:"Ewondo"', 'text' => 'Ewondo'],
	['value' => 'language:"Fang"', 'text' => 'Fang'],
	['value' => 'language:"Fanti"', 'text' => 'Fanti'],
	['value' => 'language:"Faroese"', 'text' => 'Faroese'],
	['value' => 'language:"Fijian"', 'text' => 'Fijian'],
	['value' => 'language:"Filipino"', 'text' => 'Filipino'],
	['value' => 'language:"Finnish"', 'text' => 'Finnish'],
	['value' => 'language:"Finno-Ugrian"', 'text' => 'Finno-Ugrian'],
	['value' => 'language:"Fon"', 'text' => 'Fon'],
	['value' => 'language:"French"', 'text' => 'French'],
	['value' => 'language:"Friulian"', 'text' => 'Friulian'],
	['value' => 'language:"Fulah"', 'text' => 'Fulah'],
	['value' => 'language:"Ga"', 'text' => 'Ga'],
	['value' => 'language:"Gaelic"', 'text' => 'Gaelic'],
	['value' => 'language:"Galibi Carib"', 'text' => 'Galibi Carib'],
	['value' => 'language:"Galician"', 'text' => 'Galician'],
	['value' => 'language:"Ganda"', 'text' => 'Ganda'],
	['value' => 'language:"Gayo"', 'text' => 'Gayo'],
	['value' => 'language:"Gbaya"', 'text' => 'Gbaya'],
	['value' => 'language:"Geez"', 'text' => 'Geez'],
	['value' => 'language:"Georgian"', 'text' => 'Georgian'],
	['value' => 'language:"German"', 'text' => 'German'],
	['value' => 'language:"Germanic"', 'text' => 'Germanic'],
	['value' => 'language:"Gilbertese"', 'text' => 'Gilbertese'],
	['value' => 'language:"Gondi"', 'text' => 'Gondi'],
	['value' => 'language:"Gorontalo"', 'text' => 'Gorontalo'],
	['value' => 'language:"Gothic"', 'text' => 'Gothic'],
	['value' => 'language:"Grebo"', 'text' => 'Grebo'],
	['value' => 'language:"Greek"', 'text' => 'Greek'],
	['value' => 'language:"Guarani"', 'text' => 'Guarani'],
	['value' => 'language:"Gujarati"', 'text' => 'Gujarati'],
	['value' => 'language:"Gwich`in"', 'text' => 'Gwich`in'],
	['value' => 'language:"Haida"', 'text' => 'Haida'],
	['value' => 'language:"Haitian"', 'text' => 'Haitian'],
	['value' => 'language:"Hausa"', 'text' => 'Hausa'],
	['value' => 'language:"Hawaiian"', 'text' => 'Hawaiian'],
	['value' => 'language:"Hebrew"', 'text' => 'Hebrew'],
	['value' => 'language:"Herero"', 'text' => 'Herero'],
	['value' => 'language:"Hiligaynon"', 'text' => 'Hiligaynon'],
	['value' => 'language:"Himachali"', 'text' => 'Himachali'],
	['value' => 'language:"Hindi"', 'text' => 'Hindi'],
	['value' => 'language:"Hittite"', 'text' => 'Hittite'],
	['value' => 'language:"Hmong"', 'text' => 'Hmong'],
	['value' => 'language:"Hungarian"', 'text' => 'Hungarian'],
	['value' => 'language:"Iban"', 'text' => 'Iban'],
	['value' => 'language:"Icelandic"', 'text' => 'Icelandic'],
	['value' => 'language:"Ido"', 'text' => 'Ido'],
	['value' => 'language:"Igbo"', 'text' => 'Igbo'],
	['value' => 'language:"Ijo"', 'text' => 'Ijo'],
	['value' => 'language:"Iloko"', 'text' => 'Iloko'],
	['value' => 'language:"Indic"', 'text' => 'Indic'],
	['value' => 'language:"Indo-European"', 'text' => 'Indo-European'],
	['value' => 'language:"Indonesian"', 'text' => 'Indonesian'],
	['value' => 'language:"Ingush"', 'text' => 'Ingush'],
	['value' => 'language:"Inuktitut"', 'text' => 'Inuktitut'],
	['value' => 'language:"Inupiaq"', 'text' => 'Inupiaq'],
	['value' => 'language:"Iranian"', 'text' => 'Iranian'],
	['value' => 'language:"Irish"', 'text' => 'Irish'],
	['value' => 'language:"Iroquoian"', 'text' => 'Iroquoian'],
	['value' => 'language:"Italian"', 'text' => 'Italian'],
	['value' => 'language:"Japanese"', 'text' => 'Japanese'],
	['value' => 'language:"Javanese"', 'text' => 'Javanese'],
	['value' => 'language:"Judeo-Arabic"', 'text' => 'Judeo-Arabic'],
	['value' => 'language:"Judeo-Persian"', 'text' => 'Judeo-Persian'],
	['value' => 'language:"Kabyle"', 'text' => 'Kabyle'],
	['value' => 'language:"Kachin"', 'text' => 'Kachin'],
	['value' => 'language:"Kalaallisut"', 'text' => 'Kalaallisut'],
	['value' => 'language:"Kalmyk"', 'text' => 'Kalmyk'],
	['value' => 'language:"Kamba"', 'text' => 'Kamba'],
	['value' => 'language:"Kannada"', 'text' => 'Kannada'],
	['value' => 'language:"Kanuri"', 'text' => 'Kanuri'],
	['value' => 'language:"Kara-Kalpak"', 'text' => 'Kara-Kalpak'],
	['value' => 'language:"Karachay-Balkar"', 'text' => 'Karachay-Balkar'],
	['value' => 'language:"Karelian"', 'text' => 'Karelian'],
	['value' => 'language:"Karen"', 'text' => 'Karen'],
	['value' => 'language:"Kashmiri"', 'text' => 'Kashmiri'],
	['value' => 'language:"Kashubian"', 'text' => 'Kashubian'],
	['value' => 'language:"Kawi"', 'text' => 'Kawi'],
	['value' => 'language:"Kazakh"', 'text' => 'Kazakh'],
	['value' => 'language:"Khasi"', 'text' => 'Khasi'],
	['value' => 'language:"Khoisan"', 'text' => 'Khoisan'],
	['value' => 'language:"Khotanese"', 'text' => 'Khotanese'],
	['value' => 'language:"Kikuyu"', 'text' => 'Kikuyu'],
	['value' => 'language:"Kimbundu"', 'text' => 'Kimbundu'],
	['value' => 'language:"Kinyarwanda"', 'text' => 'Kinyarwanda'],
	['value' => 'language:"Kirghiz"', 'text' => 'Kirghiz'],
	['value' => 'language:"Komi"', 'text' => 'Komi'],
	['value' => 'language:"Kongo"', 'text' => 'Kongo'],
	['value' => 'language:"Konkani"', 'text' => 'Konkani'],
	['value' => 'language:"Korean"', 'text' => 'Korean'],
	['value' => 'language:"Kosraean"', 'text' => 'Kosraean'],
	['value' => 'language:"Kpelle"', 'text' => 'Kpelle'],
	['value' => 'language:"Kru languages"', 'text' => 'Kru languages'],
	['value' => 'language:"Kuanyama"', 'text' => 'Kuanyama'],
	['value' => 'language:"Kumyk"', 'text' => 'Kumyk'],
	['value' => 'language:"Kurdish"', 'text' => 'Kurdish'],
	['value' => 'language:"Kurukh"', 'text' => 'Kurukh'],
	['value' => 'language:"Ladino"', 'text' => 'Ladino'],
	['value' => 'language:"Lahnda"', 'text' => 'Lahnda'],
	['value' => 'language:"Lamba"', 'text' => 'Lamba'],
	['value' => 'language:"Land Dayak"', 'text' => 'Land Dayak'],
	['value' => 'language:"Lao"', 'text' => 'Lao'],
	['value' => 'language:"Latin"', 'text' => 'Latin'],
	['value' => 'language:"Latvian"', 'text' => 'Latvian'],
	['value' => 'language:"Lezghian"', 'text' => 'Lezghian'],
	['value' => 'language:"Lingala"', 'text' => 'Lingala'],
	['value' => 'language:"Lithuanian"', 'text' => 'Lithuanian'],
	['value' => 'language:"Low German"', 'text' => 'Low German'],
	['value' => 'language:"Lower Sorbian"', 'text' => 'Lower Sorbian'],
	['value' => 'language:"Lozi"', 'text' => 'Lozi'],
	['value' => 'language:"Luba-Katanga"', 'text' => 'Luba-Katanga'],
	['value' => 'language:"Luba-Lulua"', 'text' => 'Luba-Lulua'],
	['value' => 'language:"Luiseno"', 'text' => 'Luiseno'],
	['value' => 'language:"Lunda"', 'text' => 'Lunda'],
	['value' => 'language:"Luo"', 'text' => 'Luo'],
	['value' => 'language:"Lushai"', 'text' => 'Lushai'],
	['value' => 'language:"Luxembourgish"', 'text' => 'Luxembourgish'],
	['value' => 'language:"Macedonian"', 'text' => 'Macedonian'],
	['value' => 'language:"Madurese"', 'text' => 'Madurese'],
	['value' => 'language:"Magahi"', 'text' => 'Magahi'],
	['value' => 'language:"Maithili"', 'text' => 'Maithili'],
	['value' => 'language:"Makasar"', 'text' => 'Makasar'],
	['value' => 'language:"Malagasy"', 'text' => 'Malagasy'],
	['value' => 'language:"Malay"', 'text' => 'Malay'],
	['value' => 'language:"Malayalam"', 'text' => 'Malayalam'],
	['value' => 'language:"Maltese"', 'text' => 'Maltese'],
	['value' => 'language:"Manchu"', 'text' => 'Manchu'],
	['value' => 'language:"Mandingo"', 'text' => 'Mandingo'],
	['value' => 'language:"Manipuri"', 'text' => 'Manipuri'],
	['value' => 'language:"Manobo"', 'text' => 'Manobo'],
	['value' => 'language:"Manx"', 'text' => 'Manx'],
	['value' => 'language:"Maori"', 'text' => 'Maori'],
	['value' => 'language:"Mapudungun"', 'text' => 'Mapudungun'],
	['value' => 'language:"Marathi"', 'text' => 'Marathi'],
	['value' => 'language:"Mari"', 'text' => 'Mari'],
	['value' => 'language:"Marshallese"', 'text' => 'Marshallese'],
	['value' => 'language:"Marwari"', 'text' => 'Marwari'],
	['value' => 'language:"Masai"', 'text' => 'Masai'],
	['value' => 'language:"Mayan"', 'text' => 'Mayan'],
	['value' => 'language:"Mende"', 'text' => 'Mende'],
	['value' => 'language:"Mi-kmaq"', 'text' => 'Mi-kmaq'],
	['value' => 'language:"Middle English"', 'text' => 'Middle English'],
	['value' => 'language:"Middle French"', 'text' => 'Middle French'],
	['value' => 'language:"Middle High German"', 'text' => 'Middle High German'],
	['value' => 'language:"Middle Irish"', 'text' => 'Middle Irish'],
	['value' => 'language:"Minangkabau"', 'text' => 'Minangkabau'],
	['value' => 'language:"Mohawk"', 'text' => 'Mohawk'],
	['value' => 'language:"Moldavian"', 'text' => 'Moldavian'],
	['value' => 'language:"Mon-Khmer"', 'text' => 'Mon-Khmer'],
	['value' => 'language:"Mongo"', 'text' => 'Mongo'],
	['value' => 'language:"Mongolian"', 'text' => 'Mongolian'],
	['value' => 'language:"Mossi"', 'text' => 'Mossi'],
	['value' => 'language:"Multiple"', 'text' => 'Multiple'],
	['value' => 'language:"Munda"', 'text' => 'Munda'],
	['value' => 'language:"Music"', 'text' => 'Music'],
	['value' => 'language:"Nahuatl"', 'text' => 'Nahuatl'],
	['value' => 'language:"Navajo"', 'text' => 'Navajo'],
	['value' => 'language:"Ndonga"', 'text' => 'Ndonga'],
	['value' => 'language:"Neapolitan"', 'text' => 'Neapolitan'],
	['value' => 'language:"Nepal Bhasa"', 'text' => 'Nepal Bhasa'],
	['value' => 'language:"Nepali"', 'text' => 'Nepali'],
	['value' => 'language:"Nias"', 'text' => 'Nias'],
	['value' => 'language:"Niger-Kordofanian"', 'text' => 'Niger-Kordofanian'],
	['value' => 'language:"Nilo-Saharan"', 'text' => 'Nilo-Saharan'],
	['value' => 'language:"Niuean"', 'text' => 'Niuean'],
	['value' => 'language:"Nogai"', 'text' => 'Nogai'],
	['value' => 'language:"North American Indian"', 'text' => 'North American Indian'],
	['value' => 'language:"North Ndebele"', 'text' => 'North Ndebele'],
	['value' => 'language:"Northern Frisian"', 'text' => 'Northern Frisian'],
	['value' => 'language:"Northern Sami"', 'text' => 'Northern Sami'],
	['value' => 'language:"Norwegian Bokmȧl"', 'text' => 'Norwegian Bokmȧl'],
	['value' => 'language:"Norwegian Nynorsk"', 'text' => 'Norwegian Nynorsk'],
	['value' => 'language:"Norwegian"', 'text' => 'Norwegian'],
	['value' => 'language:"Nubian"', 'text' => 'Nubian'],
	['value' => 'language:"Nyamwezi"', 'text' => 'Nyamwezi'],
	['value' => 'language:"Nyankole"', 'text' => 'Nyankole'],
	['value' => 'language:"Nyoro"', 'text' => 'Nyoro'],
	['value' => 'language:"Occitan"', 'text' => 'Occitan'],
	['value' => 'language:"Ojibwa"', 'text' => 'Ojibwa'],
	['value' => 'language:"Old English"', 'text' => 'Old English'],
	['value' => 'language:"Old French"', 'text' => 'Old French'],
	['value' => 'language:"Old High German"', 'text' => 'Old High German'],
	['value' => 'language:"Old Irish"', 'text' => 'Old Irish'],
	['value' => 'language:"Old Norse"', 'text' => 'Old Norse'],
	['value' => 'language:"Old Persian"', 'text' => 'Old Persian'],
	['value' => 'language:"Old Provençal"', 'text' => 'Old Provençal'],
	['value' => 'language:"Oriya"', 'text' => 'Oriya'],
	['value' => 'language:"Oromo"', 'text' => 'Oromo'],
	['value' => 'language:"Osage"', 'text' => 'Osage'],
	['value' => 'language:"Ossetian"', 'text' => 'Ossetian'],
	['value' => 'language:"Otomian"', 'text' => 'Otomian'],
	['value' => 'language:"Ottoman Turkish"', 'text' => 'Ottoman Turkish'],
	['value' => 'language:"Pahlavi"', 'text' => 'Pahlavi'],
	['value' => 'language:"Palauan"', 'text' => 'Palauan'],
	['value' => 'language:"Pali"', 'text' => 'Pali'],
	['value' => 'language:"Pampanga"', 'text' => 'Pampanga'],
	['value' => 'language:"Pangasinan"', 'text' => 'Pangasinan'],
	['value' => 'language:"Panjabi"', 'text' => 'Panjabi'],
	['value' => 'language:"Papiamento"', 'text' => 'Papiamento'],
	['value' => 'language:"Papuan"', 'text' => 'Papuan'],
	['value' => 'language:"Pedi"', 'text' => 'Pedi'],
	['value' => 'language:"Persian"', 'text' => 'Persian'],
	['value' => 'language:"Philippine"', 'text' => 'Philippine'],
	['value' => 'language:"Phoenician"', 'text' => 'Phoenician'],
	['value' => 'language:"Pohnpeian"', 'text' => 'Pohnpeian'],
	['value' => 'language:"Polish"', 'text' => 'Polish'],
	['value' => 'language:"Portuguese"', 'text' => 'Portuguese'],
	['value' => 'language:"Prakrit languages"', 'text' => 'Prakrit languages'],
	['value' => 'language:"Pushto"', 'text' => 'Pushto'],
	['value' => 'language:"Quechua"', 'text' => 'Quechua'],
	['value' => 'language:"Rajasthani"', 'text' => 'Rajasthani'],
	['value' => 'language:"Rapanui"', 'text' => 'Rapanui'],
	['value' => 'language:"Rarotongan"', 'text' => 'Rarotongan'],
	['value' => 'language:"Romance"', 'text' => 'Romance'],
	['value' => 'language:"Romanian"', 'text' => 'Romanian'],
	['value' => 'language:"Romansh"', 'text' => 'Romansh'],
	['value' => 'language:"Romany"', 'text' => 'Romany'],
	['value' => 'language:"Rundi"', 'text' => 'Rundi'],
	['value' => 'language:"Russian"', 'text' => 'Russian'],
	['value' => 'language:"Salishan"', 'text' => 'Salishan'],
	['value' => 'language:"Samaritan Aramaic"', 'text' => 'Samaritan Aramaic'],
	['value' => 'language:"Sami languages"', 'text' => 'Sami languages'],
	['value' => 'language:"Samoan"', 'text' => 'Samoan'],
	['value' => 'language:"Sango"', 'text' => 'Sango'],
	['value' => 'language:"Sanskrit"', 'text' => 'Sanskrit'],
	['value' => 'language:"Santali"', 'text' => 'Santali'],
	['value' => 'language:"Sardinian"', 'text' => 'Sardinian'],
	['value' => 'language:"Sasak"', 'text' => 'Sasak'],
	['value' => 'language:"Scots"', 'text' => 'Scots'],
	['value' => 'language:"Selkup"', 'text' => 'Selkup'],
	['value' => 'language:"Semitic"', 'text' => 'Semitic'],
	['value' => 'language:"Serbian"', 'text' => 'Serbian'],
	['value' => 'language:"Serer"', 'text' => 'Serer'],
	['value' => 'language:"Shan"', 'text' => 'Shan'],
	['value' => 'language:"Shona"', 'text' => 'Shona'],
	['value' => 'language:"Sichuan Yi"', 'text' => 'Sichuan Yi'],
	['value' => 'language:"Sicilian"', 'text' => 'Sicilian'],
	['value' => 'language:"Sidamo"', 'text' => 'Sidamo'],
	['value' => 'language:"Sign Language"', 'text' => 'Sign Language'],
	['value' => 'language:"Siksika"', 'text' => 'Siksika'],
	['value' => 'language:"Sindhi"', 'text' => 'Sindhi'],
	['value' => 'language:"Sinhala"', 'text' => 'Sinhala'],
	['value' => 'language:"Sino-Tibetan"', 'text' => 'Sino-Tibetan'],
	['value' => 'language:"Siouan"', 'text' => 'Siouan'],
	['value' => 'language:"Skolt Sami"', 'text' => 'Skolt Sami'],
	['value' => 'language:"Slave"', 'text' => 'Slave'],
	['value' => 'language:"Slavic"', 'text' => 'Slavic'],
	['value' => 'language:"Slovak"', 'text' => 'Slovak'],
	['value' => 'language:"Slovenian"', 'text' => 'Slovenian'],
	['value' => 'language:"Sogdian"', 'text' => 'Sogdian'],
	['value' => 'language:"Somali"', 'text' => 'Somali'],
	['value' => 'language:"Songhai"', 'text' => 'Songhai'],
	['value' => 'language:"Soninke"', 'text' => 'Soninke'],
	['value' => 'language:"Sorbian"', 'text' => 'Sorbian'],
	['value' => 'language:"South American Indian"', 'text' => 'South American Indian'],
	['value' => 'language:"Southern Altai"', 'text' => 'Southern Altai'],
	['value' => 'language:"Southern Sami"', 'text' => 'Southern Sami'],
	['value' => 'language:"Southern Sotho"', 'text' => 'Southern Sotho'],
	['value' => 'language:"Spanish"', 'text' => 'Spanish'],
	['value' => 'language:"Sranan Tongo"', 'text' => 'Sranan Tongo'],
	['value' => 'language:"Sukuma"', 'text' => 'Sukuma'],
	['value' => 'language:"Sumerian"', 'text' => 'Sumerian'],
	['value' => 'language:"Sundanese"', 'text' => 'Sundanese'],
	['value' => 'language:"Susu"', 'text' => 'Susu'],
	['value' => 'language:"Swahili"', 'text' => 'Swahili'],
	['value' => 'language:"Swati"', 'text' => 'Swati'],
	['value' => 'language:"Swedish"', 'text' => 'Swedish'],
	['value' => 'language:"Swiss German"', 'text' => 'Swiss German'],
	['value' => 'language:"Syriac"', 'text' => 'Syriac'],
	['value' => 'language:"Tagalog"', 'text' => 'Tagalog'],
	['value' => 'language:"Tahitian"', 'text' => 'Tahitian'],
	['value' => 'language:"Tai"', 'text' => 'Tai'],
	['value' => 'language:"Tajik"', 'text' => 'Tajik'],
	['value' => 'language:"Tamashek"', 'text' => 'Tamashek'],
	['value' => 'language:"Tamil"', 'text' => 'Tamil'],
	['value' => 'language:"Tatar"', 'text' => 'Tatar'],
	['value' => 'language:"Telugu"', 'text' => 'Telugu'],
	['value' => 'language:"Tereno"', 'text' => 'Tereno'],
	['value' => 'language:"Tetum"', 'text' => 'Tetum'],
	['value' => 'language:"Thai"', 'text' => 'Thai'],
	['value' => 'language:"Tibetan"', 'text' => 'Tibetan'],
	['value' => 'language:"Tigre"', 'text' => 'Tigre'],
	['value' => 'language:"Tigrinya"', 'text' => 'Tigrinya'],
	['value' => 'language:"Timne"', 'text' => 'Timne'],
	['value' => 'language:"Tiv"', 'text' => 'Tiv'],
	['value' => 'language:"Tlingit"', 'text' => 'Tlingit'],
	['value' => 'language:"Tok"', 'text' => 'Tok'],
	['value' => 'language:"Tonga"', 'text' => 'Tonga'],
	['value' => 'language:"Tsimshian"', 'text' => 'Tsimshian'],
	['value' => 'language:"Tsonga"', 'text' => 'Tsonga'],
	['value' => 'language:"Tswana"', 'text' => 'Tswana'],
	['value' => 'language:"Tumbuka"', 'text' => 'Tumbuka'],
	['value' => 'language:"Tupi"', 'text' => 'Tupi'],
	['value' => 'language:"Turkish"', 'text' => 'Turkish'],
	['value' => 'language:"Turkmen"', 'text' => 'Turkmen'],
	['value' => 'language:"Tuvalu"', 'text' => 'Tuvalu'],
	['value' => 'language:"Tuvinian"', 'text' => 'Tuvinian'],
	['value' => 'language:"Twi"', 'text' => 'Twi'],
	['value' => 'language:"Udmurt"', 'text' => 'Udmurt'],
	['value' => 'language:"Ugaritic"', 'text' => 'Ugaritic'],
	['value' => 'language:"Uighur"', 'text' => 'Uighur'],
	['value' => 'language:"Ukrainian"', 'text' => 'Ukrainian'],
	['value' => 'language:"Umbundu"', 'text' => 'Umbundu'],
	['value' => 'language:"Undetermined"', 'text' => 'Undetermined'],
	['value' => 'language:"Unknown"', 'text' => 'Unknown'],
	['value' => 'language:"Upper Sorbian"', 'text' => 'Upper Sorbian'],
	['value' => 'language:"Urdu"', 'text' => 'Urdu'],
	['value' => 'language:"Uzbek"', 'text' => 'Uzbek'],
	['value' => 'language:"Vai"', 'text' => 'Vai'],
	['value' => 'language:"Venda"', 'text' => 'Venda'],
	['value' => 'language:"Vietnamese"', 'text' => 'Vietnamese'],
	['value' => 'language:"Volapük"', 'text' => 'Volapük'],
	['value' => 'language:"Votic"', 'text' => 'Votic'],
	['value' => 'language:"Wakashan"', 'text' => 'Wakashan'],
	['value' => 'language:"Walloon"', 'text' => 'Walloon'],
	['value' => 'language:"Waray"', 'text' => 'Waray'],
	['value' => 'language:"Washo"', 'text' => 'Washo'],
	['value' => 'language:"Welsh"', 'text' => 'Welsh'],
	['value' => 'language:"Western Frisian"', 'text' => 'Western Frisian'],
	['value' => 'language:"Wolof"', 'text' => 'Wolof'],
	['value' => 'language:"Xhosa"', 'text' => 'Xhosa'],
	['value' => 'language:"Yakut"', 'text' => 'Yakut'],
	['value' => 'language:"Yao"', 'text' => 'Yao'],
	['value' => 'language:"Yapese"', 'text' => 'Yapese'],
	['value' => 'language:"Yiddish"', 'text' => 'Yiddish'],
	['value' => 'language:"Yoruba"', 'text' => 'Yoruba'],
	['value' => 'language:"Yupik"', 'text' => 'Yupik'],
	['value' => 'language:"Zande"', 'text' => 'Zande'],
	['value' => 'language:"Zapotec"', 'text' => 'Zapotec'],
	['value' => 'language:"Zaza"', 'text' => 'Zaza'],
	['value' => 'language:"Zenaga"', 'text' => 'Zenaga'],
	['value' => 'language:"Zhuang"', 'text' => 'Zhuang'],
	['value' => 'language:"Zulu"', 'text' => 'Zulu'],
	['value' => 'language:"Zuni"', 'text' => 'Zuni'],
];

$formats = [
	['class' => 'cat all_formats', 'value' => '', 'text' => 'All formats'],
	['class' => 'cat', 'value' => 'format:"Archives/Manuscripts"', 'text' => 'Archives/Manuscripts'],
	['class' => 'cat', 'value' => 'format:"Audio"', 'text' => 'Audio'],
	['value' => 'format:"Audio cassette"', 'text' => 'Audio Cassette'],
	['value' => 'format:"CD"', 'text' => 'CD'],
	['value' => 'format:"LP"', 'text' => 'LP'],
	['value' => 'format:"Music recording"', 'text' => 'Music recording'],
	['value' => 'format:"Spoken word recording"', 'text' => 'Spoken word recording'],
	['class' => 'cat', 'value' => 'format:"Book"', 'text' => 'Book'],
	['class' => 'cat', 'value' => 'format:"Dissertations"', 'text' => 'Dissertations'],
	['class' => 'cat', 'value' => 'format:"E-Resource"', 'text' => 'E-Resource'],
	['class' => 'cat', 'value' => 'format:"Image"', 'text' => 'Image'],
	['value' => 'format:"Photograph"', 'text' => 'Photograph'],
	['class' => 'cat', 'value' => 'format:"Journal"', 'text' => 'Journal'],
	['class' => 'cat', 'value' => 'format:"Kit"', 'text' => 'Kit'],
	['class' => 'cat', 'value' => 'format:"Library website"', 'text' => 'Library website  '],
	['class' => 'cat', 'value' => 'format:"Map"', 'text' => 'Map'],
	['class' => 'cat', 'value' => 'format:"Microform"' , 'text' => 'Microform'],
	['class' => 'cat', 'value' => 'format:"Music score"', 'text' => 'Music score'],
	['class' => 'cat', 'value' => 'format:"Print"', 'text' => 'Print'],
	//['class' => 'cat', 'value' => 'format:"U.S. Federal Government Document"', 'text' => 'U.S. Federal Government Document'],
	['class' => 'cat', 'value' => 'format:"Video"' , 'text' => 'Video'],
	['value' => 'format:"Blu-ray disc"', 'text' => 'Blu-ray disc'],
	['value' => 'format:"DVD"', 'text' => 'DVD'],
	['value' => 'format:"Laserdisc"', 'text' => 'Laserdisc'],
	['value' => 'format:"Video cassette"', 'text' => 'Video cassette'],
];

$locations = [
	['class' => 'all_locations cat', 'value' => '', 'text' => 'All Locations'],
	['data-name' => 'crerar-main', 'class' => 'cat', 'value' => 'building:"Crerar Library"', 'text' => 'Crerar Library'],
	['value' => 'building:"Crerar Reference"', 'text' => 'Crerar Reference'],
	['value' => 'building:"Crerar Reserves"', 'text' => 'Crerar Reserves'],
	['class' => 'cat', 'value' => 'building:"D&#39;Angelo Law Library"', 'text' => 'D&#39;Angelo Law Library'],
	['value' => 'building:"Law Reserves"', 'text' => 'Law Reserves'],
	['class' => 'cat', 'value' => 'building:"Eckhart Library"', 'text' => 'Eckhart Library'],
	['value' => 'building:"Eckhart Reference"', 'text' => 'Eckhart Reference'],
	['value' => 'building:"Eckhart Reserves"', 'text' => 'Eckhart Reserves'],
	['class' => 'cat', 'value' => 'building:"Regenstein Library"', 'text' => 'Regenstein Library'],
	['value' => 'building:"Regenstein Reference"', 'text' => 'Regenstein Reference'],
	['value' => 'building:"Regenstein Reserves"', 'text' => 'Regenstein Reserves'],
	['value' => 'building:"Regenstein TECHB@R"', 'text' => 'Regenstein TECHB@R'],
	['class' => 'cat', 'value' => 'building:"Special Collections Research Center"', 'text' => 'Special Collections Research Center'],
	['class' => 'cat', 'value' => 'building:"SSA"', 'text' => 'SSA'],
	['value' => 'building:"SSA Reserves"', 'text' => 'SSA Reserves'],
];

$collections = [
	['class' => 'all_collections', 'value' => '', 'text' => 'All Collections'],
	['class' => 'ns', 'disabled' => 'disabled', 'value' => '', 'text' => 'No sub-collection'],
 	['data-main-location' => 'scrc', 'value' => 'item_collection:"American Drama"', 'text' => 'American Drama'],
	['data-main-location' => 'scrc', 'value' => 'item_collection:"American Newspapers"', 'text' => 'American Newspapers'],
	['data-main-location' => 'scrc', 'value' => 'item_collection:"Archives/Manuscripts"', 'text' => 'Archives/Manuscripts'],
	['data-main-location' => 'scrc', 'value' => 'item_collection:"Archives of Czechs and Slovaks Abroad"', 'text' => 'Archives of Czechs and Slovaks Abroad'],
	['data-main-location' => 'scrc', 'value' => 'item_collection:"Atkinson Collection of American Drama"', 'text' => 'Atkinson Collection of American Drama'],
	['data-main-location' => 'scrc', 'value' => 'item_collection:"Austrian Collection of Drama"', 'text' => 'Austrian Collection of Drama'],
	['data-main-location' => 'scrc', 'value' => 'item_collection:"Codex Manuscripts"', 'text' => 'Codex Manuscripts'],
	['data-main-location' => 'crerar scrc', 'value' => 'item_collection:"Crerar Manuscripts"', 'text' => 'Crerar Manuscripts'],
	['data-main-location' => 'crerar scrc', 'value' => 'item_collection:"Crerar Rare Books"', 'text' => 'Crerar Rare Books'],
	['data-main-location' => 'reg', 'value' => 'item_collection:"Curriculum Materials Collection"', 'text' => 'Curriculum Materials Collection'],
	['data-main-location' => 'scrc', 'value' => 'item_collection:"Drama Collection"', 'text' => 'Drama Collection'],
	['data-main-location' => 'scrc', 'value' => 'item_collection:"EB Children&rsquo;s Literature"', 'text' => 'EB Children&rsquo;s Literature'],
	['data-main-location' => 'scrc', 'value' => 'item_collection:"Helen and Ruth Regenstein Collection of Rare Books"', 'text' => 'Helen and Ruth Regenstein Collection of Rare Books'],
	['data-main-location' => 'scrc', 'value' => 'item_collection:"Historical Children&rsquo;s Books"', 'text' => 'Historical Children&rsquo;s Books'],
	['data-main-location' => 'scrc', 'value' => 'item_collection:"Incunabula"', 'text' => 'Incunabula'],
	['data-main-location' => 'scrc', 'value' => 'item_collection:"Lincke Collection of Popular German Literature"', 'text' => 'Lincke Collection of Popular German Literature'],
	['data-main-location' => 'scrc', 'value' => 'item_collection:"Lincoln Collection"', 'text' => 'Lincoln Collection'],
	['data-main-location' => 'scrc', 'value' => 'item_collection:"Ludwig Rosenberger Library of Judaica"', 'text' => 'Ludwig Rosenberger Library of Judaica'],
	['data-main-location' => 'scrc', 'value' => 'item_collection:"Modern Poetry Rare"', 'text' => 'Modern Poetry Rare'],
	['data-main-location' => 'scrc', 'value' => 'item_collection:"Rare Books"', 'text' => 'Rare Books'],
	['data-main-location' => 'scrc', 'value' => 'item_collection:"University of Chicago Press Imprint Collection"', 'text' => 'University of Chicago Press Imprint Collection'],
];
?>

<fieldset id="advSearchLimits">
<legend>Limit To</legend>

<div class="row">
	<div class="col-sm-3">

	<label for="limit_language" class="displayBlock">Language:</label>
	<select id="limit_language" name="filter[]" multiple="multiple" size="10">
    <?php foreach ($languages as $language): ?>
        <?php 
            $class = '';
            if (array_key_exists('class', $language)) {
                $class = " class='" .  $language['class'] . "'";
            }
            $selected = '';
            if (array_key_exists('Language', $searchFilters)) {
                foreach ($searchFilters['Language'] as $l) {
                    if (prep_string($l['displayText']) == prep_string($language['text'])) {
                        $selected = ' selected="selected"';
                    }
                }
            }
        ?>
        <option<?=$class?><?=$selected?> value='<?=$language['value']?>'><?=$language['text']?></option>
    <?php endforeach; ?>
	</select>
	</div> <!--end col-sm-3-->

	<div class="col-sm-3">
		<label for="limit_format" class="displayBlock">Format:</label>
		<select id="limit_format" name="filter[]" multiple="multiple" size="10">
        <?php foreach ($formats as $format): ?>
            <?php
                $class = '';
                if (array_key_exists('class', $format)) {
                    $class = " class='" . $format['class'] . "'";
                }
                $selected = '';
                if (array_key_exists('Format', $searchFilters)) {
                    foreach ($searchFilters['Format'] as $f) {
                        if (prep_string($f['displayText']) == prep_string($format['text'])) {
                            $selected = ' selected="selected"';
                        }
                    }
                }
            ?>
            <option<?=$class?><?=$selected?> value='<?=$format['value']?>'><?=$format['text']?></option>
        <?php endforeach; ?>
		</select>
	</div><!--end col-sm-3-->

	<div class="col-sm-3">
		<label for="limit_building" class="displayBlock">Location:</label>
		<select id="limit_building" name="filter[]" multiple="multiple" size="10">
        <?php foreach ($locations as $location): ?>
            <?php
                $class = '';
                if (array_key_exists('class', $location)) {
                    $class = " class='" . $location['class'] . "'";
                }
                $dataname = '';
                if (array_key_exists('data-name', $location)) {
                    $dataname = " data-name='" . $location['data-name'] . "'";
                }
                $selected = '';
                if (array_key_exists('Location', $searchFilters)) {
                    foreach ($searchFilters['Location'] as $l) {
                        if (prep_string($l['displayText']) == prep_string($location['text'])) {
                            $selected = ' selected="selected"';
                        }
                    }
                }
            ?>
            <option<?=$class?><?=$dataname?><?=$selected?> value='<?=$location['value']?>'><?=$location['text']?></option>
        <?php endforeach; ?>
		</select>
	</div><!--col-sm-3-->

	<div class="col-sm-3">
		<label for="limit_collection" class="displayBlock">Collection:</label>
		<select id="limit_collection" name="filter[]" multiple="multiple" size="10">
        <?php foreach ($collections as $collection): ?>
            <?php
                $class = '';
                if (array_key_exists('class', $collection)) {
                    $class = " class='" . $collection['class'] . "'";
                }
                $datamainlocation = '';
                if (array_key_exists('data-main-location', $collection)) {
                    $datamainlocation = " data-main-location='" .  $collection['data-main-location'] . "'";
                }
                $selected = '';
                if (array_key_exists('unrecognized_facet_label', $searchFilters)) {
                    foreach ($searchFilters['unrecognized_facet_label'] as $c) {
                        if ($c['field'] == 'item_collection') {
                            if (prep_string($c['displayText']) == prep_string($collection['text'])) {
                                $selected = ' selected="selected"';
                            }
                        }
                    }
                }
            ?>

            <option<?=$class?><?=$datamainlocation?><?=$selected?> value='<?=$collection['value']?>'><?=$collection['text']?></option>
        <?php endforeach; ?>
        </select>
	</div><!--end col-sm-3-->
</div><!--end row-->

</fieldset><!--end fieldset-->

<!--<div class="row">
	<div id="location_check" class="span6 offset6 fade">
		<input id="online" type="checkbox" name="filter[]" value='format:"E-Resource"' /><label for="online">Include all online resources</label>
		<input id="mansueto" type="checkbox" name="filter[]" value='building:"Mansueto Library"' /><label for="mansueto">Include items in Mansueto</label>
	</div>
</div>end row-->

<input type="hidden" name="daterange[]" value="publishDate"/>

<div class="row">
	<div class="col-sm-3">
		<fieldset id="publishDate" class="publishDateLimit">
		    <legend>Year of Publication</legend>

            <div class="row">
			    <div class="col-sm-6">
			    <label for="publishDatefrom" class="offscreen">From:</label>
			    	<input type="text" value="" id="publishDatefrom" placeholder="from" name="publishDatefrom" class="form-control" maxlength="4" size="4">
			    </div><!--end col-sm-6-->
			    <div class="col-sm-6">
			    	<label for="publishDateto" class="offscreen">To:</label>
			    	<input type="text" value="" id="publishDateto" placeholder="to" name="publishDateto" class="form-control" maxlength="4" size="4">
			    </div><!--end col-sm-6-->
            </div><!--end row-->
            <div class="row">
                <div class="col-sm-12">
                    <? if (isset($this->ranges) && !empty($this->ranges)): ?>
                        <? 
                            $slider_value = '';
                            if (isset($this->ranges[0]['values']) && !empty($this->ranges[0]['values'])) {
                                $slider_value =  sprintf("%s,%s", $this->ranges[0]['values'][0], $this->ranges[0]['values'][1]);
                            }
                        ?>
                    <? endif; ?>
                    <div class="slider-container"><input type="text" id="publishDatedateSlider" class="hidden"<? if ($slider_value):?> value="<?=$slider_value?>"<? endif; ?>></div>
                </div><!--end col-sm-12-->
            </div><!--end row-->
		</fieldset>
	</div><!--end col-md-6-->
</div><!--end row-->

<? $this->headScript()->appendFile('vendor/bootstrap-slider.js'); ?>
<?
    $min = 1400;
    $max = date('Y') + 1;
    if ($slider_value && $slider_value != ',') {
        $min_val = array_shift(explode(",", $slider_value));
        $max_val = array_pop(explode(",", $slider_value));
    } else {
        $min_val = $min;
        $max_val = $max;
    }
    $script = <<<JS
$(document).ready(function() {
  var fillTexts = function() {
    var v = $('#publishDatedateSlider').val().split(',');
    $('#publishDatefrom').val(v[0]);
    $('#publishDateto').val(v[1]);
  };
  $('#publishDatedateSlider').slider({
     'min':$min,
     'max':$max,
     'handle':"square",
     'tooltip':"hide",
     'value':[$min_val,$max_val]
  })
  .on('slide', fillTexts)
  .data('slider');
  if ($min_val != $min || $max_val != $max) {
    fillTexts();
  }
});
JS;
?>
<?=$this->inlineScript(\Zend\View\Helper\HeadScript::SCRIPT, $script, 'SET'); ?>

