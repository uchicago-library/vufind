<?php $bookplates = $this->related->getBookplateDetails(); ?>
<div id="bookplates">
  <?php foreach($bookplates as $bookplate): ?>
    <?php $bpTitle = $this->translate($bookplate['title']);?>
    <?php $bpAltText = $this->translate('bookplate_label', ['%%title%%' => $bpTitle]); ?>
    <?php $bpFullUrl = $bookplate['fullUrl'];?>
    <?php $bpThumbUrl = $bookplate['thumbUrl'];?>
    <div class="bookplate">
      <div class="bookplate-img">
        <?php if($bpFullUrl && $bpThumbUrl):?>
          <a href="<?=$this->escapeHtmlAttr($bpFullUrl)?>">
            <img src="<?=$this->escapeHtmlAttr($bpThumbUrl)?>" alt="<?=$this->escapeHtmlAttr($bpAltText)?>" />
          </a>
        <? elseif ($bpFullUrl || $bpThumbUrl):?>
          <?php $bpOneUrl = !empty($bpFullUrl) ? $bpFullUrl : $bpThumbUrl ?>
          <img src="<?=$this->escapeHtmlAttr($bpOneUrl)?>" alt="<?=$this->escapeHtmlAttr($bpAltText)?>" />
        <? endif ?>
      </div>
      <?php if($bookplate['displayTitle']): ?>
        <div class="bookplate-title">
          <?=$this->escapeHtml($bpTitle);?>
        </div>
      <? endif ?>
    </div>
  <? endforeach; ?>
</div>
